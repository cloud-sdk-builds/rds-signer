const e=e=>encodeURIComponent(e).replace(/[!'()*]/g,t),t=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var r,n,s,i,o,a,h,c;!function(e){e.HEADER="header",e.QUERY="query"}(r||(r={})),function(e){e.HEADER="header",e.QUERY="query"}(n||(n={})),function(e){e.HTTP="http",e.HTTPS="https"}(s||(s={})),function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"}(i||(i={})),(c=o||(o={}))[c.HEADER=0]="HEADER",c[c.TRAILER=1]="TRAILER",function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"}(a||(a={})),function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"}(h||(h={}));class u{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const t=new u({...e,headers:{...e.headers}});var r;return t.query&&(t.query=(r=t.query,Object.keys(r).reduce((e,t)=>{const n=r[t];return{...e,[t]:Array.isArray(n)?[...n]:n}},{}))),t}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers}clone(){return u.clone(this)}}const f={},g={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),f[e]=t,g[t]=e}function y(e){let t="";for(let r=0;r<e.byteLength;r++)t+=f[e[r]];return t}const l=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t},p=e=>(new TextEncoder).encode(e),d=e=>"string"==typeof e?p(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),w="X-Amz-Date",b="X-Amz-Signature",m="X-Amz-Security-Token",v="authorization",A=w.toLowerCase(),S=[v,A,"date"],$=b.toLowerCase(),U="x-amz-content-sha256",E=m.toLowerCase(),L={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},H=/^proxy-/,C=/^sec-/,D="AWS4-HMAC-SHA256",R="AWS4-HMAC-SHA256-PAYLOAD",j="aws4_request",k={},P=[],T=(e,t,r)=>`${e}/${t}/${r}/${j}`,O=(e,t,r)=>{const n=new e(t);return n.update(d(r)),n.digest()},q=({headers:e},t,r)=>{const n={};for(const s of Object.keys(e).sort()){if(null==e[s])continue;const i=s.toLowerCase();(i in L||t?.has(i)||H.test(i)||C.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[s].trim().replace(/\s+/g," "))}return n},I=async({headers:e,body:t},r)=>{for(const t of Object.keys(e))if(t.toLowerCase()===U)return e[t];if(null==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||(n=t,"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(n))){const e=new r;return e.update(d(t)),y(await e.digest())}var n;return"UNSIGNED-PAYLOAD"};class x{format(e){const t=[];for(const r of Object.keys(e)){const n=p(r);t.push(Uint8Array.from([n.byteLength]),n,this.formatHeaderValue(e[r]))}const r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0));let n=0;for(const e of t)r.set(e,n),n+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":const s=new DataView(new ArrayBuffer(3+e.value.byteLength));s.setUint8(0,6),s.setUint16(1,e.value.byteLength,!1);const i=new Uint8Array(s.buffer);return i.set(e.value,3),i;case"string":const o=p(e.value),a=new DataView(new ArrayBuffer(3+o.byteLength));a.setUint8(0,7),a.setUint16(1,o.byteLength,!1);const h=new Uint8Array(a.buffer);return h.set(o,3),h;case"timestamp":const c=new Uint8Array(9);return c[0]=8,c.set(z.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!K.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const u=new Uint8Array(17);return u[0]=9,u.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2).toLowerCase();if(!(n in g))throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`);t[r/2]=g[n]}return t}(e.value.replace(/\-/g,"")),1),u}}}var B;!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(B||(B={}));const K=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class z{constructor(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x8000000000000000||e<-0x8000000000000000)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const t=new Uint8Array(8);for(let r=7,n=Math.abs(Math.round(e));r>-1&&n>0;r--,n/=256)t[r]=n;return e<0&&M(t),new z(t)}valueOf(){const e=this.bytes.slice(0),t=128&e[0];return t&&M(e),parseInt(y(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function M(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}const V=e=>{e=u.clone(e);for(const t of Object.keys(e.headers))S.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};class _{constructor({applyChecksum:e,credentials:t,region:r,service:n,sha256:s,uriEscapePath:i=!0}){this.headerFormatter=new x,this.service=n,this.sha256=s,this.uriEscapePath=i,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=l(r),this.credentialProvider=l(t)}async presign(e,t={}){const{signingDate:r=new Date,expiresIn:n=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:o,hoistableHeaders:a,signingRegion:h,signingService:c}=t,f=await this.credentialProvider();this.validateResolvedCredentials(f);const g=h??await this.regionProvider(),{longDate:y,shortDate:l}=N(r);if(n>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const p=T(l,g,c??this.service),d=((e,t={})=>{const{headers:r,query:n={}}=u.clone(e);for(const e of Object.keys(r)){const s=e.toLowerCase();("x-amz-"===s.slice(0,6)&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(n[e]=r[e],delete r[e])}return{...e,headers:r,query:n}})(V(e),{unhoistableHeaders:i,hoistableHeaders:a});f.sessionToken&&(d.query[m]=f.sessionToken),d.query["X-Amz-Algorithm"]=D,d.query["X-Amz-Credential"]=`${f.accessKeyId}/${p}`,d.query[w]=y,d.query["X-Amz-Expires"]=n.toString(10);const v=q(d,s,o);return d.query["X-Amz-SignedHeaders"]=X(v),d.query[b]=await this.getSignature(y,p,this.getSigningKey(f,g,l,c),this.createCanonicalRequest(d,v,await I(e,this.sha256))),d}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:r=new Date,priorSignature:n,signingRegion:s,signingService:i}){const o=s??await this.regionProvider(),{shortDate:a,longDate:h}=N(r),c=T(a,o,i??this.service),u=await I({headers:{},body:t},this.sha256),f=new this.sha256;f.update(e);const g=y(await f.digest()),l=[R,h,c,n,g,u].join("\n");return this.signString(l,{signingDate:r,signingRegion:o,signingService:i})}async signMessage(e,{signingDate:t=new Date,signingRegion:r,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:r,signingService:n,priorSignature:e.priorSignature}).then(t=>({message:e.message,signature:t}))}async signString(e,{signingDate:t=new Date,signingRegion:r,signingService:n}={}){const s=await this.credentialProvider();this.validateResolvedCredentials(s);const i=r??await this.regionProvider(),{shortDate:o}=N(t),a=new this.sha256(await this.getSigningKey(s,i,o,n));return a.update(d(e)),y(await a.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:r,unsignableHeaders:n,signingRegion:s,signingService:i}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const a=s??await this.regionProvider(),h=V(e),{longDate:c,shortDate:u}=N(t),f=T(u,a,i??this.service);h.headers[A]=c,o.sessionToken&&(h.headers[E]=o.sessionToken);const g=await I(h,this.sha256);!((e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1})(U,h.headers)&&this.applyChecksum&&(h.headers[U]=g);const y=q(h,n,r),l=await this.getSignature(c,f,this.getSigningKey(o,a,u,i),this.createCanonicalRequest(h,y,g));return h.headers[v]=`${D} Credential=${o.accessKeyId}/${f}, SignedHeaders=${X(y)}, Signature=${l}`,h}createCanonicalRequest(t,r,n){const s=Object.keys(r).sort();return`${t.method}\n${this.getCanonicalPath(t)}\n${(({query:t={}})=>{const r=[],n={};for(const s of Object.keys(t)){if(s.toLowerCase()===$)continue;const i=e(s);r.push(i);const o=t[s];"string"==typeof o?n[i]=`${i}=${e(o)}`:Array.isArray(o)&&(n[i]=o.slice(0).reduce((t,r)=>t.concat([`${i}=${e(r)}`]),[]).sort().join("&"))}return r.sort().map(e=>n[e]).filter(e=>e).join("&")})(t)}\n${s.map(e=>`${e}:${r[e]}`).join("\n")}\n\n${s.join(";")}\n${n}`}async createStringToSign(e,t,r){const n=new this.sha256;n.update(d(r));const s=await n.digest();return`${D}\n${e}\n${t}\n${y(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const r=[];for(const e of t.split("/"))0!==e?.length&&"."!==e&&(".."===e?r.pop():r.push(e));const n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return e(n).replace(/%2F/g,"/")}return t}async getSignature(e,t,r,n){const s=await this.createStringToSign(e,t,n),i=new this.sha256(await r);return i.update(d(s)),y(await i.digest())}getSigningKey(e,t,r,n){return(async(e,t,r,n,s)=>{const i=`${r}:${n}:${s}:${y(await O(e,t.secretAccessKey,t.accessKeyId))}:${t.sessionToken}`;if(i in k)return k[i];for(P.push(i);P.length>50;)delete k[P.shift()];let o=`AWS4${t.secretAccessKey}`;for(const t of[r,n,s,j])o=await O(e,o,t);return k[i]=o})(this.sha256,e,r,t,n||this.service)}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")}}const N=e=>{const t=(r=e,(e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e)(r).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");var r;return{longDate:t,shortDate:t.slice(0,8)}},X=e=>Object.keys(e).sort().join(";");var F="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>(new TextEncoder).encode(e);function Y(e){return e instanceof Uint8Array?e:"string"==typeof e?F(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function W(e){return"string"==typeof e?0===e.length:0===e.byteLength}var G={name:"SHA-256"},Q={name:"HMAC",hash:G},Z=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const J={};function ee(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:J}var te=function(){function e(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return e.prototype.update=function(e){if(!W(e)){var t=Y(e),r=new Uint8Array(this.toHash.byteLength+t.byteLength);r.set(this.toHash,0),r.set(t,this.toHash.byteLength),this.toHash=r}},e.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return ee().crypto.subtle.sign(Q,t,e.toHash).then(function(e){return new Uint8Array(e)})}):W(this.toHash)?Promise.resolve(Z):Promise.resolve().then(function(){return ee().crypto.subtle.digest(G,e.toHash)}).then(function(e){return Promise.resolve(new Uint8Array(e))})},e.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise(function(t,r){ee().crypto.subtle.importKey("raw",Y(e.secret),Q,!1,["sign"]).then(t,r)}),this.key.catch(function(){}))},e}();Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var re=64,ne=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),se=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ie=Math.pow(2,53)-1,oe=function(){function e(){this.state=Int32Array.from(se),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,r=e.byteLength;if(this.bytesHashed+=r,8*this.bytesHashed>ie)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[t++],r--,this.bufferLength===re&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(t.setUint8(this.bufferLength++,128),r%re>=56){for(var n=this.bufferLength;n<re;n++)t.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(n=this.bufferLength;n<56;n++)t.setUint8(n,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}var s=new Uint8Array(32);for(n=0;n<8;n++)s[4*n]=this.state[n]>>>24&255,s[4*n+1]=this.state[n]>>>16&255,s[4*n+2]=this.state[n]>>>8&255,s[4*n+3]=this.state[n]>>>0&255;return s},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,r=t[0],n=t[1],s=t[2],i=t[3],o=t[4],a=t[5],h=t[6],c=t[7],u=0;u<re;u++){if(u<16)this.temp[u]=(255&e[4*u])<<24|(255&e[4*u+1])<<16|(255&e[4*u+2])<<8|255&e[4*u+3];else{var f=this.temp[u-2],g=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,y=((f=this.temp[u-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[u]=(g+this.temp[u-7]|0)+(y+this.temp[u-16]|0)}var l=(((o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7))+(o&a^~o&h)|0)+(c+(ne[u]+this.temp[u]|0)|0)|0,p=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&n^r&s^n&s)|0;c=h,h=a,a=o,o=i+l|0,i=s,s=n,n=r,r=l+p|0}t[0]+=r,t[1]+=n,t[2]+=s,t[3]+=i,t[4]+=o,t[5]+=a,t[6]+=h,t[7]+=c},e}(),ae=function(){function e(e){this.secret=e,this.hash=new oe,this.reset()}return e.prototype.update=function(e){if(!W(e)&&!this.error)try{this.hash.update(Y(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return e=this,t=void 0,n=function(){return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(h){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}}(this,function(e){return[2,this.digestSync()]})},new((r=void 0)||(r=Promise))(function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}h((n=n.apply(e,t||[])).next())});var e,t,r,n},e.prototype.reset=function(){if(this.hash=new oe,this.secret){this.outer=new oe;var e=function(e){var t=Y(e);if(t.byteLength>re){var r=new oe;r.update(t),t=r.digest()}var n=new Uint8Array(re);return n.set(t),n}(this.secret),t=new Uint8Array(re);t.set(e);for(var r=0;r<re;r++)e[r]^=54,t[r]^=92;for(this.hash.update(e),this.outer.update(t),r=0;r<e.byteLength;r++)e[r]=0}},e}(),he=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];var ce=function(){function e(e){!function(e){return!(!function(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}(e)||"object"!=typeof e.crypto.subtle)&&((t=e.crypto.subtle)&&he.every(function(e){return"function"==typeof t[e]}));var t}(ee())?this.hash=new ae(e):this.hash=new te(e)}return e.prototype.update=function(e,t){this.hash.update(Y(e))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();const ue=e=>()=>Promise.reject(e);class fe{constructor(e){this.protocol="https:",this.service="rds-db";const t=(r=e,{runtime:"browser",sha256:r?.sha256??ce,credentials:ue("Credential is missing"),region:ue("Region is missing"),...r});var r;this.credentials=t.credentials,this.hostname=t.hostname,this.port=t.port,this.region=t.region,this.sha256=t.sha256,this.username=t.username}async getAuthToken(){const t=new _({service:this.service,region:this.region,credentials:this.credentials,sha256:this.sha256}),r=new u({method:"GET",protocol:this.protocol,hostname:this.hostname,port:this.port,query:{Action:"connect",DBUser:this.username},headers:{host:`${this.hostname}:${this.port}`}});return function(t){const{port:r,query:n}=t;let{protocol:s,path:i,hostname:o}=t;s&&":"!==s.slice(-1)&&(s+=":"),r&&(o+=`:${r}`),i&&"/"!==i.charAt(0)&&(i=`/${i}`);let a=n?function(t){const r=[];for(let n of Object.keys(t).sort()){const s=t[n];if(n=e(n),Array.isArray(s))for(let t=0,i=s.length;t<i;t++)r.push(`${n}=${e(s[t])}`);else{let t=n;(s||"string"==typeof s)&&(t+=`=${e(s)}`),r.push(t)}}return r.join("&")}(n):"";a&&"?"!==a[0]&&(a=`?${a}`);let h="";null==t.username&&null==t.password||(h=`${t.username??""}:${t.password??""}@`);let c="";return t.fragment&&(c=`#${t.fragment}`),`${s}//${h}${o}${i}${a}${c}`}(await t.presign(r,{expiresIn:900})).replace(`${this.protocol}//`,"")}}export{fe as Signer};